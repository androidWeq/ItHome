package com.hkd.ithome.fragment;import java.util.ArrayList;import java.util.List;import com.example.ithome.R;import com.hkd.ithome.adapter.HotGoodsListViewAdapter;import com.lidroid.xutils.ViewUtils;import com.lidroid.xutils.view.annotation.ViewInject;import android.content.Context;import android.os.Bundle;import android.support.v4.app.Fragment;import android.support.v4.view.PagerAdapter;import android.support.v4.view.ViewPager;import android.support.v4.view.ViewPager.OnPageChangeListener;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.ListView;public class HotgoodsFragment extends Fragment {	View view;	@ViewInject(R.id.lapin_viewpager)	ViewPager viewPager;// 辣品最外层ViewPager	ListView quanBuListView, baoPinListView;// 全部界面,爆品界面	ArrayList<View> viewPagers;// view集合,用于添加到ViewPager	ArrayList<String> datas1;	private final static int QUANBU_VIEWPAGER = 0;// 0代表全部viewpager	private final static int BAOPIN_VIEWPAGER = 1;// 1代表爆品viewpager	List<String> quanBuDatas;	HotGoodsListViewAdapter adapter;	public View onCreateView(LayoutInflater inflater, ViewGroup container,			Bundle savedInstanceState) {		view = inflater.inflate(R.layout.fragment_hotgoods, null);		ViewUtils.inject(this, view);		initViewPager();		viewPager.setOnPageChangeListener(new OnPageChangeListener() {			// arg0 代表滑到的界面的值			public void onPageSelected(int arg0) {				switch (arg0) {				case QUANBU_VIEWPAGER:					if (quanBuDatas == null) {						quanBuDatas = new ArrayList<String>();						for (int i = 0; i < 10; i++) {							quanBuDatas.add(i + "");						}					}else{						quanBuDatas.add(quanBuDatas.size()+"aa");					}					if(adapter==null || quanBuDatas.size()==11){						//adapter=new HotGoodsListViewAdapter(quanBuDatas,getActivity());						quanBuListView.setAdapter(adapter);					}else{						adapter.notifyDataSetChanged();					}					break;				case BAOPIN_VIEWPAGER:					if (quanBuDatas == null) {						quanBuDatas = new ArrayList<String>();						for (int i = 0; i < 10; i++) {							quanBuDatas.add(i + "");						}					}else{						quanBuDatas.add(quanBuDatas.size()+"bb");					}					if(adapter==null){						System.out.println("-----首次进入爆品----"+quanBuDatas.size());						adapter=new HotGoodsListViewAdapter(quanBuDatas,getActivity());						baoPinListView.setAdapter(adapter);					}else{						System.out.println("-----第二次进入爆品-----"+quanBuDatas.size());						adapter.notifyDataSetChanged();					}					break;				default:					break;				}			}			public void onPageScrolled(int arg0, float arg1, int arg2) {				// arg0=1代表开始滑动 arg0=2代表惯性滑动 arg0=0代表停止滑动			}			public void onPageScrollStateChanged(int arg0) {			}		});		return view;	}	/**	 * 初始化ViewPager	 */	private void initViewPager() {		if (viewPagers == null) {			viewPagers = new ArrayList<View>();		}		// 获得两个ViewPager界面		View quanBuViewPager = LayoutInflater.from(getActivity()).inflate(				R.layout.lapin_quanbu_viewpager, null);		View baoPinViewPager = LayoutInflater.from(getActivity()).inflate(				R.layout.lapin_baopin_viewpager, null);		// 获得ViewPager里的Listview		quanBuListView = (ListView) quanBuViewPager				.findViewById(R.id.lapin_quanbu_viewpager_listview);		baoPinListView = (ListView) baoPinViewPager				.findViewById(R.id.lapin_baopin_viewpager_listview);		viewPagers.add(quanBuViewPager);		viewPagers.add(baoPinViewPager);		viewPager.setAdapter(pagerAdapter);	}	PagerAdapter pagerAdapter = new PagerAdapter() {		@Override		public boolean isViewFromObject(View arg0, Object arg1) {			return arg0 == arg1;		}		// 获得viewPager的个数		public int getCount() {			return viewPagers.size();		}		// 移除划出屏幕的view		public void destroyItem(ViewGroup container, int position, Object object) {			container.removeView(viewPagers.get(position));		}		// 加载滑入屏幕的view		public Object instantiateItem(ViewGroup container, int position) {			View view = viewPagers.get(position);			container.addView(view);			return view;		}	};}